{% extends "concerts/base.html" %}

{% block title %}
    {% if location %}
        {{ location.name }} 콘서트 목록
    {% elif is_search_result %}
        '{{ query }}' 검색 결과
    {% else %}
        모든 콘서트 목록
    {% endif %}
{% endblock %}

{% block content %}
    <h2>
        {% if location %}
            {{ location.name }} 콘서트 목록
        {% elif is_search_result %}
            '{{ query }}' 검색 결과 ({{ concerts|length }}개)
        {% else %}
            모든 콘서트 목록
        {% endif %}
    </h2>

    {% if concerts %}
        <ul class="concert-list">
            {% for concert in concerts %}
            <li class="concert-item">
                <h3>{{ concert.title }}</h3>
                <p><strong>장소:</strong> <a href="{% url 'concerts:concerts_by_location' concert.location.id %}">{{ concert.location.name }}</a></p>
                <p>
                    <strong>기간:</strong>
                    {% if concert.start_date %}
                        {{ concert.start_date|date:"Y.m.d" }}
                        {% if concert.end_date and concert.end_date != concert.start_date %}
                            ~ {{ concert.end_date|date:"Y.m.d" }}
                        {% endif %}
                    {% else %}
                        정보 없음
                    {% endif %}
                </p>
            </li>
            {% endfor %}
        </ul>
    {% else %}
        <p style="text-align: center;">
            {% if is_search_result %}
                '{{ query }}'에 대한 검색 결과가 없습니다.
            {% else %}
                표시할 콘서트 정보가 없습니다.
            {% endif %}
        </p>
    {% endif %}

    <div style="text-align: center; margin-top: 20px;">
        <a href="{% url 'concerts:index' %}">홈으로 돌아가기</a>
        {% if location or is_search_result %}
        | <a href="{% url 'concerts:all_concerts' %}">모든 콘서트 보기</a>
        | <a href="{% url 'concerts:venue_stats' %}">공연장 목록 보기</a>
        {% endif %}
    </div>
{% endblock %}